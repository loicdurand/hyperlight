export default class t{#a=()=>void 0;#b;state={};actions={};constructor({container:e=document,events:n={},...i}){return this.#b=this.#c(e),Object.entries(i).forEach(([e,n])=>{if(!t.#d(n))return this.state[e]=n;this.actions[e]=({target:t,...e})=>(n({...e,target:t}),this.state)}),Object.entries(n).map(([t])=>[t,t.startsWith("on")?t.substring(2):t]).filter(([e,i])=>{if("update"!==i)return!0;let s=n[e](this.state);return this.#a=()=>Object.entries(s).map(([t,e])=>n=>this.#b.querySelectorAll(t).forEach(t=>e({...n,target:t}))).forEach(e=>e(t.#e(this.state))),this.#a(),!1}).forEach(([e,i])=>{let s=n[e](this.actions);this.#b.addEventListener(i,({target:e})=>{Object.entries(s).filter(([t])=>e.matches(t)).forEach(([n,i])=>{i({...t.#e(this.state),target:e,entity:this}),this.#a()})})}),this}get container(){return this.#b}remove(){this.#b.outerHTML="",this.state=null}update(){this.#a()}#c(e){if(t.#f(e)&&"TEMPLATE"!==e.nodeName)return e;if("string"==typeof e&&"template"!==e)return document.getElementById(e.startsWith("#")?e.substring(1):e)||document.getElementsByTagName(e)[0];let n=e.content.firstElementChild,{nodeName:i}=n,s=document.createElement(i.toLowerCase());for(let r of n.attributes)s.setAttribute(r.name,r.value);return s.innerHTML=t.#g(n.innerHTML),s}static #g=t=>t.replaceAll(/^[\s\n\t]|[\s\n\t]$/g,"");static #f=t=>t instanceof Element||t instanceof Document;static #d=t=>["[object AsyncFunction]","[object Function]"].includes(({}).toString.call(t));static #h=t=>t.constructor===[].constructor;static #e=e=>null===e?{}:(Object.entries(e).forEach(([n,i])=>{t.#h(i)&&(e[n]=i.filter(e=>!(e instanceof t)||null!==e.state))}),e)};